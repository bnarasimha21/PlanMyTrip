spec:
  name: plan-my-trip

  services:
  - name: frontend
    git:
      branch: main
      repo_clone_url: https://github.com/bnarasimha21/PlanMyTrip.git
    source_dir: frontend
    dockerfile_path: frontend/Dockerfile
    http_port: 3000
    routes:
    - path: /
    envs:
    - key: REACT_APP_API_URL
      scope: RUN_AND_BUILD_TIME
      value: ${APP_URL}/backend
    - key: VITE_API_BASE
      scope: BUILD_TIME
      value: ${APP_URL}
    - key: VITE_MAPBOX_TOKEN
      scope: BUILD_TIME
      value: ${VITE_MAPBOX_TOKEN}
    - key: VITE_GOOGLE_CLIENT_ID
      scope: BUILD_TIME
      value: ${VITE_GOOGLE_CLIENT_ID}

  - name: backend
    git:
      branch: main
      repo_clone_url: https://github.com/bnarasimha21/PlanMyTrip.git
    source_dir: backend
    dockerfile_path: backend/Dockerfile
    http_port: 8000
    routes:
    - path: /backend